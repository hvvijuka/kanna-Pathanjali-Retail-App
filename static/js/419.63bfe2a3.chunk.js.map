{"version":3,"file":"static/js/419.63bfe2a3.chunk.js","mappings":"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","sources":["components/OrdersPage.js","utils/api.js"],"sourcesContent":["// -----------------------------\r\n// File: src/components/OrdersPage.js\r\n// -----------------------------\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport * as api from \"../utils/api\"; // ‚úÖ import all api functions\r\n\r\nexport default function OrdersPage() {\r\n  const { user } = useAuth();\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user]);\r\n\r\nasync function load() {\r\n  try {\r\n    alert(\"Hello\");\r\n    alert(`User found: ${user.username}`);\r\n    if (!user) {\r\n      console.log(\"‚ö™ No user found in AuthContext.\");\r\n      alert(\"FAILED - No user found in AuthContext\");  \r\n      setOrders([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // ‚úÖ Show an alert with user info\r\n    alert(`User found: ${user.username || \"Guest\"} (ID: ${user._id || \"demo\"})`);\r\n\r\n    console.log(\"üü¢ [FRONTEND] Fetching orders for userId:\", user._id || \"demo\");\r\n    const res = await api.getOrdersByUser(user._id || \"demo\");\r\n    console.log(\"üü¢ [FRONTEND] Received orders:\", res);\r\n\r\n    setOrders(res || []);\r\n  } catch (err) {\r\n    console.error(\"‚ùå [FRONTEND] Error loading orders:\", err);\r\n    alert(\"Failed to load your orders.\");\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n}\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-6 text-center text-gray-600\">\r\n        Loading your orders...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (orders.length === 0) {\r\n    return (\r\n      <div className=\"p-6 text-center text-gray-600\">\r\n        <h2 className=\"text-2xl font-bold mb-4\">My Orders</h2>\r\n        <p>No orders found. Please place an order to see it here.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-5xl mx-auto\">\r\n      <h2 className=\"text-2xl font-bold mb-6\">My Orders</h2>\r\n\r\n      <div className=\"space-y-6\">\r\n        {orders.map((o) => (\r\n          <div\r\n            key={o._id}\r\n            className=\"bg-white p-5 rounded-2xl shadow border border-gray-200\"\r\n          >\r\n            {/* Order Header */}\r\n            <div className=\"flex flex-wrap justify-between border-b pb-2 mb-3\">\r\n              <div>\r\n                <div className=\"font-semibold text-gray-800\">\r\n                  Order ID: {o._id}\r\n                </div>\r\n                <div className=\"text-sm text-gray-500\">\r\n                  Date:{\" \"}\r\n                  {new Date(o.createdAt || o.date).toLocaleString(\"en-IN\", {\r\n                    dateStyle: \"medium\",\r\n                    timeStyle: \"short\",\r\n                  })}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <div className=\"font-semibold text-green-700\">\r\n                  ‚Çπ{o.totalAmount}\r\n                </div>\r\n                <div className=\"text-sm text-gray-500\">\r\n                  Payment: {o.paymentMethod || \"COD\"}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* User Info */}\r\n            <div className=\"text-sm text-gray-600 mb-3\">\r\n              <div>\r\n                <span className=\"font-medium\">Customer:</span>{\" \"}\r\n                {o.username || \"Guest User\"}\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium\">Address:</span>{\" \"}\r\n                {o.address || \"Not provided\"}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Items */}\r\n            <div className=\"divide-y\">\r\n              {o.items.map((it, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className=\"flex items-center gap-4 py-2 text-sm\"\r\n                >\r\n                  <img\r\n                    src={it.image}\r\n                    alt={it.name}\r\n                    className=\"w-16 h-16 object-cover rounded\"\r\n                  />\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium\">{it.name}</div>\r\n                    <div className=\"text-gray-500\">\r\n                      Qty: {it.qty} √ó ‚Çπ{it.price}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right font-semibold\">\r\n                    ‚Çπ{Number(it.qty) * Number(it.price)}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Optional images array */}\r\n            {o.images?.length > 0 && (\r\n              <div className=\"mt-3 flex flex-wrap gap-2\">\r\n                {o.images.map((img, i) => (\r\n                  <img\r\n                    key={i}\r\n                    src={img}\r\n                    alt={`Order image ${i + 1}`}\r\n                    className=\"w-16 h-16 object-cover rounded border\"\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Footer */}\r\n            <div className=\"mt-3 text-xs text-gray-400\">\r\n              Order placed on:{\" \"}\r\n              {new Date(o.createdAt || o.date).toLocaleDateString(\"en-IN\")}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","const BACKEND_URL =\r\n  process.env.REACT_APP_BACKEND_URL ||\r\n  (window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:5001\"\r\n    : \"https://rk-backend-cxfa.onrender.com\");\r\n\r\n// Place order API\r\nexport const placeOrder = async (payload) => {\r\n  const res = await fetch(`${BACKEND_URL}/api/placeOrder`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n  if (!res.ok) throw new Error(\"Failed to place order\");\r\n  return await res.json();\r\n};\r\n\r\n\r\nexport async function getOrdersByUser(userId) {\r\n  const res = await fetch(`${BACKEND_URL}/api/getOrders/${userId}`);\r\n  if (!res.ok) throw new Error(\"Failed to get orders\");\r\n  return res.json();\r\n}"],"names":["OrdersPage","user","useAuth","orders","setOrders","useState","loading","setLoading","useEffect","async","alert","concat","username","console","log","_id","res","api","err","error","load","_jsx","className","children","length","_jsxs","map","o","_o$images","Date","createdAt","date","toLocaleString","dateStyle","timeStyle","totalAmount","paymentMethod","address","items","it","idx","src","image","alt","name","qty","price","Number","images","img","i","toLocaleDateString","BACKEND_URL","process","placeOrder","fetch","method","headers","body","JSON","stringify","payload","ok","Error","json","getOrdersByUser","userId"],"sourceRoot":""}