"use strict";(self.webpackChunkpatanjali_koramangala=self.webpackChunkpatanjali_koramangala||[]).push([[419],{419:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(43),r=t(729),d=t(862),n=t(579);function o(){const{user:e}=(0,r.A)(),[s,t]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{!async function(){try{if(alert("Hello"),alert("User found: ".concat(e.username)),!e)return console.log("\u26aa No user found in AuthContext."),alert("FAILED - No user found in AuthContext"),t([]),void i(!1);alert("User found: ".concat(e.username||"Guest"," (ID: ").concat(e._id||"demo",")")),console.log("\ud83d\udfe2 [FRONTEND] Fetching orders for userId:",e._id||"demo");const s=await d.m(e._id||"demo");console.log("\ud83d\udfe2 [FRONTEND] Received orders:",s),t(s||[])}catch(s){console.error("\u274c [FRONTEND] Error loading orders:",s),alert("Failed to load your orders.")}finally{i(!1)}}()},[e]),o?(0,n.jsx)("div",{className:"p-6 text-center text-gray-600",children:"Loading your orders..."}):0===s.length?(0,n.jsxs)("div",{className:"p-6 text-center text-gray-600",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"My Orders"}),(0,n.jsx)("p",{children:"No orders found. Please place an order to see it here."})]}):(0,n.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"My Orders"}),(0,n.jsx)("div",{className:"space-y-6",children:s.map(e=>{var s;return(0,n.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow border border-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-wrap justify-between border-b pb-2 mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-semibold text-gray-800",children:["Order ID: ",e._id]}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:["Date:"," ",new Date(e.createdAt||e.date).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("div",{className:"font-semibold text-green-700",children:["\u20b9",e.totalAmount]}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:["Payment: ",e.paymentMethod||"COD"]})]})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Customer:"})," ",e.username||"Guest User"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Address:"})," ",e.address||"Not provided"]})]}),(0,n.jsx)("div",{className:"divide-y",children:e.items.map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center gap-4 py-2 text-sm",children:[(0,n.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsxs)("div",{className:"text-gray-500",children:["Qty: ",e.qty," \xd7 \u20b9",e.price]})]}),(0,n.jsxs)("div",{className:"text-right font-semibold",children:["\u20b9",Number(e.qty)*Number(e.price)]})]},s))}),(null===(s=e.images)||void 0===s?void 0:s.length)>0&&(0,n.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.images.map((e,s)=>(0,n.jsx)("img",{src:e,alt:"Order image ".concat(s+1),className:"w-16 h-16 object-cover rounded border"},s))}),(0,n.jsxs)("div",{className:"mt-3 text-xs text-gray-400",children:["Order placed on:"," ",new Date(e.createdAt||e.date).toLocaleDateString("en-IN")]})]},e._id)})})]})}},862:(e,s,t)=>{t.d(s,{m:()=>d,w:()=>r});const a="http://localhost:5001",r=async e=>{const s=await fetch("".concat(a,"/api/placeOrder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to place order");return await s.json()};async function d(e){const s=await fetch("".concat(a,"/api/getOrders/").concat(e));if(!s.ok)throw new Error("Failed to get orders");return s.json()}}}]);
//# sourceMappingURL=419.63bfe2a3.chunk.js.map