"use strict";(self.webpackChunkpatanjali_koramangala=self.webpackChunkpatanjali_koramangala||[]).push([[460],{460:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});a(43);var r=a(169),t=a(729),l=a(216),n=a(579);function d(){const{cart:e,updateQty:s,remove:a,clear:d}=(0,r._)(),{user:c}=(0,t.A)(),i=(0,l.Zp)(),o=e.reduce((e,s)=>e+Number(s.price||0)*Number(s.qty||1),0);return(0,n.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Cart"}),0===e.length?(0,n.jsx)("p",{children:"No items in cart"}):(0,n.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[e.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-4 border-b py-3",children:[(0,n.jsx)("img",{src:e.secure_url||e.image,alt:e.name,className:"w-20 h-20 object-cover rounded"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-semibold",children:e.name}),(0,n.jsxs)("div",{className:"text-sm",children:["\u20b9",e.price]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"number",value:e.qty,onChange:a=>s(e.id,Number(a.target.value||1)),className:"w-20 border p-1 rounded"})}),(0,n.jsxs)("div",{className:"w-24",children:["\u20b9",Number(e.price||0)*Number(e.qty||1)]}),(0,n.jsx)("button",{onClick:()=>a(e.id),className:"text-red-500",children:"Remove"})]},e.id)),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,n.jsxs)("div",{className:"font-bold",children:["Total: \u20b9",o]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>i("/shop"),className:"px-3 py-1 border rounded",children:"Continue"}),(0,n.jsx)("button",{onClick:async()=>{if(!c)return alert("Please login (demo: set user in session)");if(0===e.length)return alert("Cart empty");const s={userId:c._id||"demo",username:c.username||"demo",items:e,totalAmount:o,paymentMethod:"COD",cashCollected:0};try{const e=await api.placeOrder(s);alert("Order placed: "+e._id),d(),i("/orders")}catch(a){console.error(a),alert("Failed to place order")}},className:"px-3 py-1 bg-green-600 text-white rounded",children:"Place Order (COD)"})]})]})]})]})}}}]);
//# sourceMappingURL=460.d5e9bf30.chunk.js.map