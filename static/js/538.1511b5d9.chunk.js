"use strict";(self.webpackChunkpatanjali_koramangala=self.webpackChunkpatanjali_koramangala||[]).push([[538],{538:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n=r(555),s=r(43),o=r(216),a=r(579);function c(){const e=(0,o.Zp)(),[t,r]=(0,s.useState)({}),[c,i]=(0,s.useState)(!1),[l,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{g()},[]);const g=async()=>{try{i(!0);const e="localhost"===window.location.hostname?"http://localhost:5001":"https://rk-backend-cxfa.onrender.com",t=await fetch("".concat(e,"/api/getCloudImages"));if(!t.ok)throw new Error("Failed: ".concat(t.status," ").concat(t.statusText));const n=await t.json();if(!n||0===n.length)throw new Error("No images found!");const s={};n.forEach(e=>{const t=e.public_id.split("/"),r=t.length>1&&t[1]?t.slice(1,-1).join("/")||t[1]:"Uncategorized";let n="",o="",a="";const c=(e.context||{}).custom||{};"object"===typeof c?(n=c.price||"",o=c.qty||"",a=c.description||""):"string"===typeof c&&c.split("|").forEach(e=>{const[t,r]=e.split("=");"price"===t&&(n=r),"qty"===t&&(o=r),"description"===t&&(a=r)}),s[r]||(s[r]=[]),s[r].push({id:e.asset_id,name:t[t.length-1],secure_url:e.secure_url,price:n,qty:o,description:a})}),r(s);const o=Object.keys(s)[0];m(o||null),console.log("\u2705 Cloud images loaded:",s)}catch(e){alert("\u274c "+e.message),console.error("Error fetching images:",e)}finally{i(!1)}},p=Object.keys(t);return(0,a.jsxs)("div",{className:"p-6 min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udecd\ufe0f Patanjali Product Gallery"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{e("/cart",{state:{cart:l}})},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:["Go to Cart (",l.length,")"]}),(0,a.jsx)("button",{onClick:()=>{alert("\ud83d\udc4b Logged out successfully!"),e("/")},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Logout"})]})]}),c?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Loading images..."}):0===p.length?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"No images found."}):(0,a.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg shadow-sm bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-green-100 cursor-pointer rounded-t-lg",onClick:()=>(e=>{m(u===e?null:e)})(e),children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-800",children:e}),(0,a.jsx)("span",{className:"text-gray-600",children:u===e?"\u25b2":"\u25bc"})]}),u===e&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4",children:t[e].map(e=>(0,a.jsxs)("div",{className:"border rounded-xl p-3 shadow-sm hover:shadow-md transition bg-white",children:[(0,a.jsx)("img",{src:e.secure_url,alt:e.name,className:"w-full h-40 object-cover rounded-lg mb-2"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-600",children:["\u20b9",e.price]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,a.jsx)("button",{onClick:()=>(e=>{l.find(t=>t.id===e.id)?alert("".concat(e.name," is already in cart!")):(d([...l,(0,n.A)((0,n.A)({},e),{},{qty:1})]),alert("\u2705 Added to cart: ".concat(e.name)))})(e),className:"w-full bg-green-600 text-white py-1.5 rounded hover:bg-green-700",children:"Add to Cart"})]},e.id))})]},e))})]})}},555:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function o(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}r.d(t,{A:()=>c})}}]);
//# sourceMappingURL=538.1511b5d9.chunk.js.map