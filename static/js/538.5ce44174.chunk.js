"use strict";(self.webpackChunkpatanjali_koramangala=self.webpackChunkpatanjali_koramangala||[]).push([[538],{538:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(43),r=s(216),c=s(169),n=s(579);function l(){const e=(0,r.Zp)(),{cart:t,add:s}=(0,c._)(),[l,o]=(0,a.useState)({}),[i,d]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{m()},[]);const m=async()=>{try{d(!0);const e="localhost"===window.location.hostname?"http://localhost:5001":"https://rk-backend-cxfa.onrender.com",t=await fetch("".concat(e,"/api/getCloudImages"));if(!t.ok)throw new Error("Failed: ".concat(t.status," ").concat(t.statusText));const s=await t.json();if(!s||0===s.length)throw new Error("No images found!");const a={};s.forEach(e=>{const t=e.public_id.split("/"),s=t.length>1&&t[1]?t.slice(1,-1).join("/")||t[1]:"Uncategorized";let r="",c="",n="";const l=(e.context||{}).custom||{};"object"===typeof l?(r=l.price||"",c=l.qty||"",n=l.description||""):"string"===typeof l&&l.split("|").forEach(e=>{const[t,s]=e.split("=");"price"===t&&(r=s),"qty"===t&&(c=s),"description"===t&&(n=s)}),a[s]||(a[s]=[]),a[s].push({id:e.asset_id,name:t[t.length-1],secure_url:e.secure_url,price:r,qty:c,description:n})}),o(a);const r=Object.keys(a)[0];h(r||null)}catch(e){alert("\u274c "+e.message),console.error("Error fetching images:",e)}finally{d(!1)}},u=Object.keys(l);return(0,n.jsxs)("div",{className:"p-6 min-h-screen bg-gray-50",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udecd\ufe0f Patanjali Product Gallery"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)("button",{onClick:()=>e("/cart"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:["Go to Cart (",t.length,")"]}),(0,n.jsx)("button",{onClick:()=>{alert("\ud83d\udc4b Logged out successfully!"),e("/")},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Logout"})]})]}),i?(0,n.jsx)("p",{className:"text-center text-gray-500",children:"Loading images..."}):0===u.length?(0,n.jsx)("p",{className:"text-center text-gray-500",children:"No images found."}):(0,n.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,n.jsxs)("div",{className:"border rounded-lg shadow-sm bg-white",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 bg-green-100 cursor-pointer rounded-t-lg",onClick:()=>(e=>h(g===e?null:e))(e),children:[(0,n.jsx)("h3",{className:"font-semibold text-lg text-gray-800",children:e}),(0,n.jsx)("span",{className:"text-gray-600",children:g===e?"\u25b2":"\u25bc"})]}),g===e&&(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4",children:l[e].map(e=>(0,n.jsxs)("div",{className:"border rounded-xl p-3 shadow-sm hover:shadow-md transition bg-white",children:[(0,n.jsx)("img",{src:e.secure_url,alt:e.name,className:"w-full h-40 object-cover rounded-lg mb-2"}),(0,n.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,n.jsxs)("p",{className:"text-gray-600",children:["\u20b9",e.price]}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,n.jsx)("button",{onClick:()=>(e=>{s(e),alert("\u2705 Added to cart: ".concat(e.name))})(e),className:"w-full bg-green-600 text-white py-1.5 rounded hover:bg-green-700",children:"Add to Cart"})]},e.id))})]},e))})]})}}}]);
//# sourceMappingURL=538.5ce44174.chunk.js.map