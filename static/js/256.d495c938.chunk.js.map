{"version":3,"file":"static/js/256.d495c938.chunk.js","mappings":"0MAIA,MACMA,EAAe,QAEN,SAASC,IACtB,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,CAAC,SACvCC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,KACxCG,EAAkBC,IAAuBJ,EAAAA,EAAAA,UAAS,QAClDK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,KAC5BO,EAAeC,IAAoBR,EAAAA,EAAAA,UAAS,OAC5CS,EAAUC,IAAeV,EAAAA,EAAAA,WAAS,GACnCW,GAAWC,EAAAA,EAAAA,OACVC,EAAkBC,IAAuBd,EAAAA,EAAAA,UAAS,OAE3De,EAAAA,EAAAA,WAAU,KACoBC,WAC1B,IACE,MAAMC,EACyB,cAA7BC,OAAOC,SAASC,SACZ,wBACA,uCAENC,QAAQC,IAAI,+BAADC,OAAsBN,IAEjC,MACMO,SADYC,EAAAA,EAAMC,IAAI,GAADH,OAAIN,EAAW,oBACjBU,KAEnBC,EAAW,GACXC,EAAgB,IAAIC,IAAI,CAAC,QAE/B,IAAK,MAAMC,KAAUP,EAAc,CACjC,MAAMQ,EAASR,EAAaO,GACtBE,EAAWF,EAAOG,QAAQ,WAAY,KAAO,MAEnDF,EAAOG,QAASC,IAAS,IAADC,EAAAC,EACtB,MAAMC,EAAKH,EAAII,UAAYC,KAAKC,MAAQC,KAAKC,SACvCC,EAAOT,EAAIS,OAAqB,QAAjBR,EAAID,EAAIU,iBAAS,IAAAT,OAAA,EAAbA,EAAeU,MAAM,KAAKC,QAAS,UACtDC,EAAWb,EAAIc,YAAcd,EAAIe,KAAO,GACxCC,EAAehB,EAAIU,UAEnBO,GAAiB,QAAXf,EAAAF,EAAIkB,eAAO,IAAAhB,OAAA,EAAXA,EAAaiB,SAAU,CAAC,EAC9BC,EAAQH,EAAIG,OAAS,GACrBC,EAAMJ,EAAII,KAAO,GACjBC,EAAcL,EAAIK,aAAe,GAEvC9B,EAAS+B,KAAK,CACZpB,KACAM,OACAe,MAAOX,EACPhB,WACA4B,UAAU,EACVL,QACAC,MACAC,cACAZ,UAAWM,EACXU,QAAQ,MAIZjC,EAAckC,IAAI9B,EACpB,CAEA3B,EAASsB,GACT7B,EAAc,IAAI8B,IAClBR,QAAQC,IAAI,oCAAgCM,EAC9C,CAAE,MAAOoC,GACP3C,QAAQ4C,MAAM,4CAAwCD,GACtDE,MAAM,oDACR,GAGFC,IACC,IAKD,MAgCMC,EAAoBA,CAAC7B,EAAI8B,EAAOC,KACpChE,EAAUiE,GACRA,EAAKC,IAAKC,GACRA,EAAKlC,KAAOA,GAAEmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQD,GAAI,IAAE,CAACJ,GAAQC,EAAOR,QAAQ,IAASW,IAGjE/D,GAAY,IAsIRiE,EAAe7E,EAAW8E,OAAO,CAACC,EAAKC,KAC3CD,EAAIC,GAAOzE,EAAM0E,OAAQN,GAASA,EAAKxC,WAAa6C,GAC7CD,GACN,CAAC,GAMN,OACEG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+BAA8BC,SAAA,EAE3CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,oCAAmCC,SAAC,qBAClDC,EAAAA,EAAAA,KAAA,UACEC,QAtIeC,KACnB1E,EAAS,MAsILsE,UAAU,2DAA0DC,SACrE,eAKHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,oCAAmCC,SAAC,qBAClDC,EAAAA,EAAAA,KAAA,UACEC,QA3IeE,KACnB3E,EAAS,YA2ILsE,UAAU,2DAA0DC,SACrE,eAMHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,SACEb,MAAOrE,EACPsF,SAAWC,GAAMtF,EAAesF,EAAEC,OAAOnB,OACzCoB,YAAY,eACZT,UAAU,6BAEZE,EAAAA,EAAAA,KAAA,UACEC,QArNoBO,KACpB1F,IAAgBH,EAAW8F,SAAS3F,KACtCF,EAAc,IAAID,EAAYG,IAC9BC,EAAe,MAmNb+E,UAAU,+DAA8DC,SACzE,qBAMHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,UACEI,SAAWC,GAAMpF,EAAoBoF,EAAEC,OAAOnB,OAC9CW,UAAU,qBACVX,MAAOnE,EAAiB+E,SAEvBpF,EAAW0E,IAAKM,IACfK,EAAAA,EAAAA,KAAA,UAAAD,SAAmBJ,GAANA,OAIjBK,EAAAA,EAAAA,KAAA,SACEU,KAAK,OACLC,OAAO,UACPP,SAnOyBC,IAC7B,MAAMO,EAAOP,EAAEC,OAAOO,MAAM,GAC5B,IAAKD,EAAM,OAEX,MAAME,EAAS,IAAIC,WACnBD,EAAOE,UAAY,KACjB,MAAMC,EAAU,CACd7D,GAAIE,KAAKC,MACTG,KAAMkD,EAAKlD,KACXW,MAAO,GACPC,IAAK,GACLC,YAAa,GACbzB,SAAU9B,EACVyD,MAAOqC,EAAOI,OACdxC,UAAU,EACVkC,QAEFzF,EAAUiE,GAAS,IAAIA,EAAM6B,IAC7B5F,EAAiB4F,EAAQ7D,KAE3B0D,EAAOK,cAAcP,IAgNjBd,UAAU,2BAKZ5E,EAAMkG,KAAM9B,IAAUA,EAAKZ,WAAapD,KACxC0E,EAAAA,EAAAA,KAAA,UACEC,QAnLwBpE,UAC9B,GAAqB,IAAjBX,EAAMmG,OAAc,OAAOtC,MAAM,wBAErC,MAAMuC,EAAW,IAAIpG,GACfY,EACJyF,wBAMIC,EAAc,CAAC,EACrBF,EAAStE,QAAQ,CAACsC,EAAMmC,KACtB,IAAMnC,EAAKZ,UAAYY,EAAKsB,MAAStB,EAAKX,OAAQ,CAAC,IAAD+C,EAChD,MAAM/B,GAAmB,QAAb+B,EAAApC,EAAKxC,gBAAQ,IAAA4E,OAAA,EAAbA,EAAeC,OAAO5E,QAAQ,OAAQ,OAAQ,gBACrDyE,EAAY7B,KAAM6B,EAAY7B,GAAO,IAC1C6B,EAAY7B,GAAKnB,MAAIe,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAID,GAAI,IAAEmC,UACnC,IAGF,IAAK,MAAM9B,KAAO6B,EAAa,CAC7B,MAAMI,EAAkBJ,EAAY7B,GAEpC,IAAK,MAAMkC,KAAYD,EAAiB,CACtC,MAAM,KAAEhB,EAAI,KAAElD,EAAI,MAAEW,EAAK,IAAEC,EAAG,YAAEC,EAAW,MAAEkD,EAAK,UAAE9D,GAAckE,EAElE,IACE,IAAKnE,IAASkD,EAAM,CAClB1E,QAAQ4F,KAAK,4DACb,QACF,CAEA,MAAMC,EAAU,GAAA3F,OAAM3B,EAAY,KAAA2B,OAAIuD,GAChCqC,EAActE,EAAOA,EAAKX,QAAQ,YAAa,IAAG,WAAAX,OAAckB,KAAKC,OACrE0E,EAAa,SAAA7F,OAAYiC,GAAS,GAAE,SAAAjC,OAAQkC,GAAO,GAAE,iBAAAlC,OAAgBmC,GAAe,IAGpF2D,EAAiBvE,GAAS,GAAAvB,OAAO2F,EAAU,KAAA3F,OAAI4F,GAG/CG,EAASvB,EAAI,GAAAxE,OACZN,EAAW,0BAAAM,OAAyBgG,mBAAmBL,GAAW,eAAA3F,OAAcgG,mBAAmBJ,GAAY,aAAA5F,OAAYgG,mBAAmBH,GAAc,mBAAA7F,OAC5JN,EAAW,6BAAAM,OAA4BgG,mBAAmBF,GAAe,aAAA9F,OAAYgG,mBAAmBH,GAAc,gBAEvHI,QAAe/F,EAAAA,EAAMC,IAAI4F,IACzB,UAAEG,EAAS,UAAEC,EAAS,OAAEC,EAAM,UAAEC,GAAcJ,EAAO7F,KAE3D,GAAIoE,EAAM,CAER,MAAM8B,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQhC,GACxB8B,EAASE,OAAO,SAAUb,GAC1BW,EAASE,OAAO,YAAaZ,GAC7BU,EAASE,OAAO,UAAWJ,GAC3BE,EAASE,OAAO,YAAaL,GAC7BG,EAASE,OAAO,YAAaN,GAC7BI,EAASE,OAAO,UAAWX,GAE3B,MAAMY,QAAiBvG,EAAAA,EAAMwG,KAAK,mCAAD1G,OACIqG,EAAS,iBAC5CC,GAIFpB,EAASG,GAAOhD,MAAQoE,EAASrG,KAAKuB,WACtCuD,EAASG,GAAO9D,UAAYkF,EAASrG,KAAKmB,UAC1CzB,QAAQC,IAAI,iCAADC,OAA6BsB,EAAI,YAAAtB,OAAM2F,GACpD,KAAO,CAEL,IAAKT,EAASG,GAAO9D,UAAW,CAC9BzB,QAAQ4F,KAAK,0CAAD1F,OAAiCsB,EAAI,0BACjD,QACF,CAEA,MAAMgF,EAAW,IAAIC,SACrBD,EAASE,OAAO,YAAatB,EAASG,GAAO9D,WAC7C+E,EAASE,OAAO,OAAQ,UACxBF,EAASE,OAAO,UAAWX,GAC3BS,EAASE,OAAO,UAAWJ,GAC3BE,EAASE,OAAO,YAAaL,GAC7BG,EAASE,OAAO,YAAaN,SAEvBhG,EAAAA,EAAMwG,KAAK,mCAAD1G,OACqBqG,EAAS,mBAC5CC,GAGFxG,QAAQC,IAAI,sCAADC,OAA6BsB,GAC1C,CAGA4D,EAASG,GAAO/C,UAAW,EAC3B4C,EAASG,GAAO9C,QAAS,CAC3B,CAAE,MAAOE,GAAM,IAADkE,EAAAC,EAAAC,EACZ,MAAMC,GAAuB,QAAZH,EAAAlE,EAAIgE,gBAAQ,IAAAE,GAAM,QAANC,EAAZD,EAAcvG,YAAI,IAAAwG,GAAO,QAAPC,EAAlBD,EAAoBlE,aAAK,IAAAmE,OAAb,EAAZA,EAA2BE,UAAWtE,EAAIsE,QAC3DjH,QAAQ4C,MAAM,2BAAD1C,OAAuBsB,EAAI,MAAAtB,OAAK8G,IAC7CnE,MAAM,qBAAD3C,OAAsBsB,EAAI,OAAAtB,OAAM8G,GACvC,CACF,CACF,CAEA/H,EAASmG,GACT/F,GAAY,GACZwD,MAAM,mDA6EAe,UAAU,kEAAiEC,SAE1EzE,EACG,oCACA,6BAKPX,EAAW0E,IAAKM,IAAG,IAAAyD,EAAA,OAClBvD,EAAAA,EAAAA,MAAA,OAAeC,UAAU,4CAA2CC,SAAA,EAElEF,EAAAA,EAAAA,MAAA,OACEC,UAAU,iFACVG,QAASA,KAAMoD,OAhFrB1H,EAAoBD,KADMoB,EAiFgB6C,GAhFU,KAAO7C,GADjCA,OAiFqBiD,SAAA,EAEzCC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAAEJ,KACrDK,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAC5BrE,IAAqBiE,EAAM,SAAM,cAKrCjE,IAAqBiE,IACpBK,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2DAA0DC,SACrD,QADqDqD,EACtE5D,EAAaG,UAAI,IAAAyD,OAAA,EAAjBA,EAAmB/D,IAAKC,IACvB,MAAMgE,EAAYlI,IAAkBkE,EAAKlC,GACzC,OACEyC,EAAAA,EAAAA,MAAA,OAEEC,UAAU,4DAA2DC,SAAA,CAEpET,EAAKb,QACJuB,EAAAA,EAAAA,KAAA,OACEuD,IAAKjE,EAAKb,MACV+E,IAAKlE,EAAK5B,KACVoC,UAAU,2CAGdE,EAAAA,EAAAA,KAAA,KAAGF,UAAU,oBAAmBC,SAAET,EAAK5B,QAEvCsC,EAAAA,EAAAA,KAAA,SACEU,KAAK,OACLH,YAAY,QACZpB,MAAOG,EAAKjB,MACZoF,UAAWH,EACXlD,SAAWC,GACTpB,EAAkBK,EAAKlC,GAAI,QAASiD,EAAEC,OAAOnB,OAE/CW,UAAS,kCAAA1D,OACPkH,EAAY,WAAa,kBAI7BtD,EAAAA,EAAAA,KAAA,SACEU,KAAK,SACLH,YAAY,WACZpB,MAAOG,EAAKhB,IACZmF,UAAWH,EACXlD,SAAWC,GACTpB,EAAkBK,EAAKlC,GAAI,MAAOiD,EAAEC,OAAOnB,OAE7CW,UAAS,kCAAA1D,OACPkH,EAAY,WAAa,kBAI7BtD,EAAAA,EAAAA,KAAA,YACEO,YAAY,cACZpB,MAAOG,EAAKf,YACZkF,UAAWH,EACXlD,SAAWC,GACTpB,EAAkBK,EAAKlC,GAAI,cAAeiD,EAAEC,OAAOnB,OAErDW,UAAS,kCAAA1D,OACPkH,EAAY,WAAa,kBAI7BzD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oCAAmCC,SAAA,EAChDF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,yBAAwBC,SAAA,CAAC,aACzBT,EAAKxC,YAEjBwC,EAAKZ,UACJsB,EAAAA,EAAAA,KAAA,QAAMF,UAAU,wBAAuBC,SAAC,cAExCC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,0BAAyBC,SAAC,qBAI9CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,EACxCC,EAAAA,EAAAA,KAAA,UACEC,QAASA,KAAMyD,OAtSftG,EAsS0BkC,EAAKlC,QArSjD/B,EAAkB+D,GAAUA,IAAShC,EAAK,KAAOA,GAD/BA,OAuSA0C,UAAS,gCAAA1D,OACPkH,EACI,kCACA,qCACHvD,SAEFuD,EAAY,OAAS,UAGxBtD,EAAAA,EAAAA,KAAA,UACEC,QAASA,KAAM0D,OA5SbvG,EA4S0BkC,EAAKlC,GA3SnDjC,EAASD,EAAM0E,OAAQN,GAASA,EAAKlC,KAAOA,SACxChC,IAAkBgC,GAAI/B,EAAiB,OAFvB+B,OA6SF0C,UAAU,2DAA0DC,SACrE,gBA5EET,EAAKlC,UAnBZuC,OA4GhB,C","sources":["components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst CLOUD_NAME = \"dqdkd2crn\";\r\nconst ASSET_FOLDER = \"Radha\";\r\n\r\nexport default function AdminDashboard() {\r\n  const [categories, setCategories] = useState([\"All\"]);\r\n  const [newCategory, setNewCategory] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\r\n  const [items, setItems] = useState([]);\r\n  const [editingItemId, setEditingItemId] = useState(null);\r\n  const [hasEdits, setHasEdits] = useState(false); // âœ… track unsaved edits\r\n  const navigate = useNavigate();\r\n  const [expandedCategory, setExpandedCategory] = useState(null);\r\n\r\nuseEffect(() => {\r\n  const fetchUploadedImages = async () => {\r\n    try {\r\n      const BACKEND_URL =\r\n        window.location.hostname === \"localhost\"\r\n          ? \"http://localhost:5001\"\r\n          : \"https://rk-backend-cxfa.onrender.com\";\r\n\r\n      console.log(`ðŸ§© Using backend: ${BACKEND_URL}`);\r\n\r\n      const res = await axios.get(`${BACKEND_URL}/api/getImages`); // or /api/getCloudImages\r\n      const folderImages = res.data;\r\n\r\n      const allItems = [];\r\n      const allCategories = new Set([\"All\"]);\r\n\r\n      for (const folder in folderImages) {\r\n        const images = folderImages[folder];\r\n        const category = folder.replace(/^Radha\\//, \"\") || \"All\";\r\n\r\n        images.forEach((img) => {\r\n          const id = img.asset_id || Date.now() + Math.random();\r\n          const name = img.name || img.public_id?.split(\"/\").pop() || \"unknown\";\r\n          const imageUrl = img.secure_url || img.url || \"\";\r\n          const cloudinaryId = img.public_id;\r\n\r\n          const ctx = img.context?.custom || {};\r\n          const price = ctx.price || \"\";\r\n          const qty = ctx.qty || \"\";\r\n          const description = ctx.description || \"\";\r\n\r\n          allItems.push({\r\n            id,\r\n            name,\r\n            image: imageUrl,\r\n            category,\r\n            uploaded: true,\r\n            price,\r\n            qty,\r\n            description,\r\n            public_id: cloudinaryId,\r\n            edited: false,\r\n          });\r\n        });\r\n\r\n        allCategories.add(category);\r\n      }\r\n\r\n      setItems(allItems);\r\n      setCategories([...allCategories]);\r\n      console.log(\"âœ… Fetched Cloudinary images:\", allItems);\r\n    } catch (err) {\r\n      console.error(\"âŒ Failed to fetch Cloudinary images:\", err);\r\n      alert(\"Error fetching images. Check console for details.\");\r\n    }\r\n  };\r\n\r\n  fetchUploadedImages();\r\n}, []);\r\n\r\n  \r\n\r\n  // âœ… Add new category\r\n  const handleAddCategory = () => {\r\n    if (newCategory && !categories.includes(newCategory)) {\r\n      setCategories([...categories, newCategory]);\r\n      setNewCategory(\"\");\r\n    }\r\n  };\r\n\r\n  // âœ… Local file upload (before uploading to Cloudinary)\r\n  const handleFileUploadLocal = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      const newItem = {\r\n        id: Date.now(),\r\n        name: file.name,\r\n        price: \"\",\r\n        qty: \"\",\r\n        description: \"\",\r\n        category: selectedCategory,\r\n        image: reader.result,\r\n        uploaded: false,\r\n        file,\r\n      };\r\n      setItems((prev) => [...prev, newItem]);\r\n      setEditingItemId(newItem.id);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  // âœ… Track field edits\r\n  const handleChangeField = (id, field, value) => {\r\n    setItems((prev) =>\r\n      prev.map((item) =>\r\n        item.id === id ? { ...item, [field]: value, edited: true } : item\r\n      )\r\n    );\r\n    setHasEdits(true); // show Upload button when any field changes\r\n  };\r\n\r\n  // âœ… Toggle edit mode\r\n  const toggleEdit = (id) => {\r\n    setEditingItemId((prev) => (prev === id ? null : id));\r\n  };\r\n\r\n  // âœ… Delete item\r\n  const handleDelete = (id) => {\r\n    setItems(items.filter((item) => item.id !== id));\r\n    if (editingItemId === id) setEditingItemId(null);\r\n  };\r\n\r\n  // âœ… Logout\r\n  const handleLogout = () => {\r\n    navigate(\"/\");\r\n  };\r\n\r\n // âœ… Logout\r\n  const handleOrders = () => {\r\n    navigate(\"/orders\");\r\n  };\r\n\r\n\r\n\r\n  const handleUploadAllSigned = async () => {\r\n  if (items.length === 0) return alert(\"No images to upload!\");\r\n\r\n  const newItems = [...items];\r\n  const BACKEND_URL =\r\n    process.env.REACT_APP_BACKEND_URL ||\r\n    (window.location.hostname === \"localhost\"\r\n      ? \"http://localhost:5001\"\r\n      : \"https://rk-backend-cxfa.onrender.com\");\r\n\r\n  // Group items by category\r\n  const categoryMap = {};\r\n  newItems.forEach((item, index) => {\r\n    if ((!item.uploaded && item.file) || item.edited) {\r\n      const cat = item.category?.trim().replace(/\\s+/g, \"_\") || \"Uncategorized\";\r\n      if (!categoryMap[cat]) categoryMap[cat] = [];\r\n      categoryMap[cat].push({ ...item, index });\r\n    }\r\n  });\r\n\r\n  for (const cat in categoryMap) {\r\n    const itemsInCategory = categoryMap[cat];\r\n\r\n    for (const itemData of itemsInCategory) {\r\n      const { file, name, price, qty, description, index, public_id } = itemData;\r\n\r\n      try {\r\n        if (!name && !file) {\r\n          console.warn(\"âš ï¸ Skipping item with missing name and no file\");\r\n          continue;\r\n        }\r\n\r\n        const folderPath = `${ASSET_FOLDER}/${cat}`;\r\n        const cleanedName = name ? name.replace(/\\.[^/.]+$/, \"\") : `unnamed_${Date.now()}`;\r\n        const contextString = `price=${price || \"\"}|qty=${qty || \"\"}|description=${description || \"\"}`;\r\n\r\n        // Determine the correct public_id for Cloudinary\r\n        const actualPublicId = public_id || `${folderPath}/${cleanedName}`;\r\n\r\n        // Fetch signed credentials\r\n        const sigURL = file\r\n          ? `${BACKEND_URL}/api/signature?folder=${encodeURIComponent(folderPath)}&public_id=${encodeURIComponent(cleanedName)}&context=${encodeURIComponent(contextString)}&type=upload`\r\n          : `${BACKEND_URL}/api/signature?public_id=${encodeURIComponent(actualPublicId)}&context=${encodeURIComponent(contextString)}&type=upload`;\r\n\r\n        const sigRes = await axios.get(sigURL);\r\n        const { signature, timestamp, apiKey, cloudName } = sigRes.data;\r\n\r\n        if (file) {\r\n          // ðŸŸ¢ Upload new file\r\n          const formData = new FormData();\r\n          formData.append(\"file\", file);\r\n          formData.append(\"folder\", folderPath);\r\n          formData.append(\"public_id\", cleanedName);\r\n          formData.append(\"api_key\", apiKey);\r\n          formData.append(\"timestamp\", timestamp);\r\n          formData.append(\"signature\", signature);\r\n          formData.append(\"context\", contextString);\r\n\r\n          const response = await axios.post(\r\n            `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`,\r\n            formData\r\n          );\r\n\r\n          // Save Cloudinary info\r\n          newItems[index].image = response.data.secure_url;\r\n          newItems[index].public_id = response.data.public_id;\r\n          console.log(`âœ… Uploaded successfully: ${name} â†’ ${folderPath}`);\r\n        } else {\r\n          // ðŸŸ¡ Metadata update only\r\n          if (!newItems[index].public_id) {\r\n            console.warn(`âš ï¸ Skipping metadata update: ${name} has no public_id yet`);\r\n            continue;\r\n          }\r\n\r\n          const formData = new FormData();\r\n          formData.append(\"public_id\", newItems[index].public_id);\r\n          formData.append(\"type\", \"upload\"); // required for explicit API\r\n          formData.append(\"context\", contextString);\r\n          formData.append(\"api_key\", apiKey);\r\n          formData.append(\"timestamp\", timestamp);\r\n          formData.append(\"signature\", signature);\r\n\r\n          await axios.post(\r\n            `https://api.cloudinary.com/v1_1/${cloudName}/image/explicit`,\r\n            formData\r\n          );\r\n\r\n          console.log(`ðŸ“ Updated metadata for: ${name}`);\r\n        }\r\n\r\n        // âœ… Mark item as uploaded & saved\r\n        newItems[index].uploaded = true;\r\n        newItems[index].edited = false;\r\n      } catch (err) {\r\n        const errorMsg = err.response?.data?.error?.message || err.message;\r\n        console.error(`âŒ Failed to upload ${name}: ${errorMsg}`);\r\n        alert(`Failed to upload \"${name}\": ${errorMsg}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  setItems(newItems);\r\n  setHasEdits(false);\r\n  alert(\"âœ… All uploads & edits saved successfully!\");\r\n};\r\n\r\n\r\n  // âœ… Group items by category\r\n  const groupedItems = categories.reduce((acc, cat) => {\r\n    acc[cat] = items.filter((item) => item.category === cat);\r\n    return acc;\r\n  }, {});\r\n\r\nconst handleToggleCategory = (category) =>\r\n    setExpandedCategory(expandedCategory === category ? null : category);\r\n\r\n\r\nreturn (\r\n  <div className=\"p-8 bg-green-50 min-h-screen\">\r\n    {/* Header */}\r\n    <div className=\"flex justify-between items-center mb-6\">\r\n      <h1 className=\"text-2xl font-bold text-green-700\">Admin Dashboard</h1>\r\n      <button\r\n        onClick={handleLogout}\r\n        className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n      >\r\n        Logout\r\n      </button>\r\n    </div>\r\n\r\n    <div className=\"flex justify-between items-center mb-6\">\r\n      <h1 className=\"text-2xl font-bold text-green-700\">Admin Dashboard</h1>\r\n      <button\r\n        onClick={handleOrders}\r\n        className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n      >\r\n        Orders\r\n      </button>\r\n    </div>\r\n\r\n    {/* Category Management */}\r\n    <div className=\"flex gap-2 mb-4\">\r\n      <input\r\n        value={newCategory}\r\n        onChange={(e) => setNewCategory(e.target.value)}\r\n        placeholder=\"New Category\"\r\n        className=\"border p-2 rounded w-64\"\r\n      />\r\n      <button\r\n        onClick={handleAddCategory}\r\n        className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n      >\r\n        Add Category\r\n      </button>\r\n    </div>\r\n\r\n    {/* File Upload */}\r\n    <div className=\"flex gap-2 mb-6\">\r\n      <select\r\n        onChange={(e) => setSelectedCategory(e.target.value)}\r\n        className=\"border p-2 rounded\"\r\n        value={selectedCategory}\r\n      >\r\n        {categories.map((cat) => (\r\n          <option key={cat}>{cat}</option>\r\n        ))}\r\n      </select>\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={handleFileUploadLocal}\r\n        className=\"border p-2 rounded\"\r\n      />\r\n    </div>\r\n\r\n    {/* Upload All Button */}\r\n    {(items.some((item) => !item.uploaded) || hasEdits) && (\r\n      <button\r\n        onClick={handleUploadAllSigned}\r\n        className=\"mb-6 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700\"\r\n      >\r\n        {hasEdits\r\n          ? \"Update Edited Items to Cloudinary\"\r\n          : \"Upload All to Cloudinary\"}\r\n      </button>\r\n    )}\r\n\r\n    {/* Display items grouped by category */}\r\n    {categories.map((cat) => (\r\n      <div key={cat} className=\"mb-8 border rounded-lg shadow-sm bg-white\">\r\n        {/* Category Header */}\r\n        <div\r\n          className=\"flex justify-between items-center p-4 bg-green-100 cursor-pointer rounded-t-lg\"\r\n          onClick={() => handleToggleCategory(cat)}\r\n        >\r\n          <h3 className=\"font-semibold text-lg text-gray-800\">{cat}</h3>\r\n          <span className=\"text-gray-600\">\r\n            {expandedCategory === cat ? \"â–²\" : \"â–¼\"}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Category Content - only show when expanded */}\r\n        {expandedCategory === cat && (\r\n          <div className=\"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\r\n            {groupedItems[cat]?.map((item) => {\r\n              const isEditing = editingItemId === item.id;\r\n              return (\r\n                <div\r\n                  key={item.id}\r\n                  className=\"p-4 bg-white rounded-xl shadow hover:shadow-lg transition\"\r\n                >\r\n                  {item.image && (\r\n                    <img\r\n                      src={item.image}\r\n                      alt={item.name}\r\n                      className=\"w-full h-40 object-cover rounded mb-3\"\r\n                    />\r\n                  )}\r\n                  <p className=\"font-bold text-lg\">{item.name}</p>\r\n\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Price\"\r\n                    value={item.price}\r\n                    disabled={!isEditing}\r\n                    onChange={(e) =>\r\n                      handleChangeField(item.id, \"price\", e.target.value)\r\n                    }\r\n                    className={`border p-1 rounded w-full mb-2 ${\r\n                      isEditing ? \"bg-white\" : \"bg-gray-100\"\r\n                    }`}\r\n                  />\r\n\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Quantity\"\r\n                    value={item.qty}\r\n                    disabled={!isEditing}\r\n                    onChange={(e) =>\r\n                      handleChangeField(item.id, \"qty\", e.target.value)\r\n                    }\r\n                    className={`border p-1 rounded w-full mb-2 ${\r\n                      isEditing ? \"bg-white\" : \"bg-gray-100\"\r\n                    }`}\r\n                  />\r\n\r\n                  <textarea\r\n                    placeholder=\"Description\"\r\n                    value={item.description}\r\n                    disabled={!isEditing}\r\n                    onChange={(e) =>\r\n                      handleChangeField(item.id, \"description\", e.target.value)\r\n                    }\r\n                    className={`border p-1 rounded w-full mb-2 ${\r\n                      isEditing ? \"bg-white\" : \"bg-gray-100\"\r\n                    }`}\r\n                  />\r\n\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <p className=\"text-sm text-green-700\">\r\n                      Category: {item.category}\r\n                    </p>\r\n                    {item.uploaded ? (\r\n                      <span className=\"text-xs text-blue-600\">Uploaded</span>\r\n                    ) : (\r\n                      <span className=\"text-xs text-orange-600\">Not uploaded</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex justify-between mt-3\">\r\n                    <button\r\n                      onClick={() => toggleEdit(item.id)}\r\n                      className={`px-3 py-1 rounded text-white ${\r\n                        isEditing\r\n                          ? \"bg-green-600 hover:bg-green-700\"\r\n                          : \"bg-yellow-500 hover:bg-yellow-600\"\r\n                      }`}\r\n                    >\r\n                      {isEditing ? \"Save\" : \"Edit\"}\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={() => handleDelete(item.id)}\r\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n}\r\n"],"names":["ASSET_FOLDER","AdminDashboard","categories","setCategories","useState","newCategory","setNewCategory","selectedCategory","setSelectedCategory","items","setItems","editingItemId","setEditingItemId","hasEdits","setHasEdits","navigate","useNavigate","expandedCategory","setExpandedCategory","useEffect","async","BACKEND_URL","window","location","hostname","console","log","concat","folderImages","axios","get","data","allItems","allCategories","Set","folder","images","category","replace","forEach","img","_img$public_id","_img$context","id","asset_id","Date","now","Math","random","name","public_id","split","pop","imageUrl","secure_url","url","cloudinaryId","ctx","context","custom","price","qty","description","push","image","uploaded","edited","add","err","error","alert","fetchUploadedImages","handleChangeField","field","value","prev","map","item","_objectSpread","groupedItems","reduce","acc","cat","filter","_jsxs","className","children","_jsx","onClick","handleLogout","handleOrders","onChange","e","target","placeholder","handleAddCategory","includes","type","accept","file","files","reader","FileReader","onloadend","newItem","result","readAsDataURL","some","length","newItems","process","categoryMap","index","_item$category","trim","itemsInCategory","itemData","warn","folderPath","cleanedName","contextString","actualPublicId","sigURL","encodeURIComponent","sigRes","signature","timestamp","apiKey","cloudName","formData","FormData","append","response","post","_err$response","_err$response$data","_err$response$data$er","errorMsg","message","_groupedItems$cat","handleToggleCategory","isEditing","src","alt","disabled","toggleEdit","handleDelete"],"sourceRoot":""}